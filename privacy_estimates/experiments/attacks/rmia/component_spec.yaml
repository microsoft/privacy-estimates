$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: privacy_estimates_experiments_attacks_rmia
display_name: rmia
version: local1
type: command
description: Robust MI Attack
inputs:
  challenge_points:
    type: uri_folder
    description: Challenge points in Huggingface dataset format
  mi_statistics:
    type: uri_folder
    description: MI statistics in Huggingface dataset format
  offline_a:
    type: number
    description: RMIA Offline parameter. If not supplied online attack is performed
    optional: true
outputs:
  scores:
    type: uri_folder
    description: Trained model
code: .
command: >-
  python rmia.py \
    --challenge_points ${{inputs.challenge_points}} \
    --mi_statistics ${{inputs.mi_statistics}} \
    $[[ --offline_a ${{inputs.offline_a}} ]] \
    --scores ${{outputs.scores}}
environment:
  conda_file: environment.yaml
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu22.04
